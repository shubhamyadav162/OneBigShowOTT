{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { db } from \"../utils/firebase\";\nimport { collection, doc, setDoc, serverTimestamp, onSnapshot, getDocs } from 'firebase/firestore';\nvar usersApi = {\n  createUserProfile: function () {\n    var _createUserProfile = _asyncToGenerator(function* (_ref) {\n      var uid = _ref.uid,\n        email = _ref.email,\n        name = _ref.name,\n        _ref$role = _ref.role,\n        role = _ref$role === void 0 ? 'Viewer' : _ref$role,\n        _ref$status = _ref.status,\n        status = _ref$status === void 0 ? 'Active' : _ref$status;\n      try {\n        yield setDoc(doc(db, 'users', uid), {\n          uid: uid,\n          email: email,\n          name: name,\n          role: role,\n          status: status,\n          createdAt: serverTimestamp()\n        });\n      } catch (error) {\n        console.error('usersApi.createUserProfile error', error);\n      }\n    });\n    function createUserProfile(_x) {\n      return _createUserProfile.apply(this, arguments);\n    }\n    return createUserProfile;\n  }(),\n  subscribeToUsers: function subscribeToUsers(callback) {\n    var q = collection(db, 'users');\n    var unsubscribe = onSnapshot(q, function (snapshot) {\n      var users = snapshot.docs.map(function (doc) {\n        return _objectSpread({\n          id: doc.id\n        }, doc.data());\n      });\n      callback(users);\n    }, function (error) {\n      console.error('usersApi.subscribeToUsers error', error);\n    });\n    return unsubscribe;\n  },\n  getUsers: function () {\n    var _getUsers = _asyncToGenerator(function* () {\n      try {\n        var snap = yield getDocs(collection(db, 'users'));\n        return snap.docs.map(function (doc) {\n          return _objectSpread({\n            id: doc.id\n          }, doc.data());\n        });\n      } catch (error) {\n        console.error('usersApi.getUsers error', error);\n        return [];\n      }\n    });\n    function getUsers() {\n      return _getUsers.apply(this, arguments);\n    }\n    return getUsers;\n  }()\n};\nexport default usersApi;","map":{"version":3,"names":["db","collection","doc","setDoc","serverTimestamp","onSnapshot","getDocs","usersApi","createUserProfile","_createUserProfile","_asyncToGenerator","_ref","uid","email","name","_ref$role","role","_ref$status","status","createdAt","error","console","_x","apply","arguments","subscribeToUsers","callback","q","unsubscribe","snapshot","users","docs","map","_objectSpread","id","data","getUsers","_getUsers","snap"],"sources":["E:/bigshow/src/api/usersApi.js"],"sourcesContent":["import { db } from '../utils/firebase';\r\nimport { collection, doc, setDoc, serverTimestamp, onSnapshot, getDocs } from 'firebase/firestore';\r\n\r\nconst usersApi = {\r\n  /**\r\n   * Create or update a user profile in Firestore\r\n   * @param {object} user - User data (uid, email, name, optional role, status)\r\n   */\r\n  createUserProfile: async ({ uid, email, name, role = 'Viewer', status = 'Active' }) => {\r\n    try {\r\n      await setDoc(doc(db, 'users', uid), {\r\n        uid,\r\n        email,\r\n        name,\r\n        role,\r\n        status,\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    } catch (error) {\r\n      console.error('usersApi.createUserProfile error', error);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Subscribe to real-time updates of the users collection\r\n   * @param {function} callback - Called with array of user profiles\r\n   * @returns {function} unsubscribe\r\n   */\r\n  subscribeToUsers: (callback) => {\r\n    const q = collection(db, 'users');\r\n    const unsubscribe = onSnapshot(\r\n      q,\r\n      (snapshot) => {\r\n        const users = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n        callback(users);\r\n      },\r\n      (error) => {\r\n        console.error('usersApi.subscribeToUsers error', error);\r\n      }\r\n    );\r\n    return unsubscribe;\r\n  },\r\n\r\n  /**\r\n   * Fetch all user profiles once\r\n   * @returns {Promise<Array>} Array of user profiles\r\n   */\r\n  getUsers: async () => {\r\n    try {\r\n      const snap = await getDocs(collection(db, 'users'));\r\n      return snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    } catch (error) {\r\n      console.error('usersApi.getUsers error', error);\r\n      return [];\r\n    }\r\n  },\r\n};\r\n\r\nexport default usersApi; "],"mappings":";;;;AAAA,SAASA,EAAE;AACX,SAASC,UAAU,EAAEC,GAAG,EAAEC,MAAM,EAAEC,eAAe,EAAEC,UAAU,EAAEC,OAAO,QAAQ,oBAAoB;AAElG,IAAMC,QAAQ,GAAG;EAKfC,iBAAiB;IAAA,IAAAC,kBAAA,GAAAC,iBAAA,CAAE,WAAAC,IAAA,EAAoE;MAAA,IAA3DC,GAAG,GAAAD,IAAA,CAAHC,GAAG;QAAEC,KAAK,GAAAF,IAAA,CAALE,KAAK;QAAEC,IAAI,GAAAH,IAAA,CAAJG,IAAI;QAAAC,SAAA,GAAAJ,IAAA,CAAEK,IAAI;QAAJA,IAAI,GAAAD,SAAA,cAAG,QAAQ,GAAAA,SAAA;QAAAE,WAAA,GAAAN,IAAA,CAAEO,MAAM;QAANA,MAAM,GAAAD,WAAA,cAAG,QAAQ,GAAAA,WAAA;MAC9E,IAAI;QACF,MAAMd,MAAM,CAACD,GAAG,CAACF,EAAE,EAAE,OAAO,EAAEY,GAAG,CAAC,EAAE;UAClCA,GAAG,EAAHA,GAAG;UACHC,KAAK,EAALA,KAAK;UACLC,IAAI,EAAJA,IAAI;UACJE,IAAI,EAAJA,IAAI;UACJE,MAAM,EAANA,MAAM;UACNC,SAAS,EAAEf,eAAe,CAAC;QAC7B,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOgB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MAC1D;IACF,CAAC;IAAA,SAbDZ,iBAAiBA,CAAAc,EAAA;MAAA,OAAAb,kBAAA,CAAAc,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAjBhB,iBAAiB;EAAA,GAahB;EAODiB,gBAAgB,EAAE,SAAlBA,gBAAgBA,CAAGC,QAAQ,EAAK;IAC9B,IAAMC,CAAC,GAAG1B,UAAU,CAACD,EAAE,EAAE,OAAO,CAAC;IACjC,IAAM4B,WAAW,GAAGvB,UAAU,CAC5BsB,CAAC,EACD,UAACE,QAAQ,EAAK;MACZ,IAAMC,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAAC,UAAA9B,GAAG;QAAA,OAAA+B,aAAA;UAAOC,EAAE,EAAEhC,GAAG,CAACgC;QAAE,GAAKhC,GAAG,CAACiC,IAAI,CAAC,CAAC;MAAA,CAAG,CAAC;MACvET,QAAQ,CAACI,KAAK,CAAC;IACjB,CAAC,EACD,UAACV,KAAK,EAAK;MACTC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IACzD,CACF,CAAC;IACD,OAAOQ,WAAW;EACpB,CAAC;EAMDQ,QAAQ;IAAA,IAAAC,SAAA,GAAA3B,iBAAA,CAAE,aAAY;MACpB,IAAI;QACF,IAAM4B,IAAI,SAAShC,OAAO,CAACL,UAAU,CAACD,EAAE,EAAE,OAAO,CAAC,CAAC;QACnD,OAAOsC,IAAI,CAACP,IAAI,CAACC,GAAG,CAAC,UAAA9B,GAAG;UAAA,OAAA+B,aAAA;YAAOC,EAAE,EAAEhC,GAAG,CAACgC;UAAE,GAAKhC,GAAG,CAACiC,IAAI,CAAC,CAAC;QAAA,CAAG,CAAC;MAC9D,CAAC,CAAC,OAAOf,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,OAAO,EAAE;MACX;IACF,CAAC;IAAA,SARDgB,QAAQA,CAAA;MAAA,OAAAC,SAAA,CAAAd,KAAA,OAAAC,SAAA;IAAA;IAAA,OAARY,QAAQ;EAAA;AASV,CAAC;AAED,eAAe7B,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}